# PRD 维护指南

> 本文档说明如何维护和更新 PRD 文档

---

## 1. 何时更新 PRD

### 必须更新的情况

- ✅ **新增功能**: 添加新功能需求时
- ✅ **功能完成**: 功能开发完成并测试通过后
- ✅ **功能取消**: 决定不实现某个功能时
- ✅ **迭代计划变更**: 调整迭代计划或优先级时
- ✅ **架构变更**: 架构变更影响功能实现时

### 建议更新的情况

- 💡 **需求变更**: 功能需求发生变更时
- 💡 **技术方案调整**: 实现方案发生重大调整时
- 💡 **性能优化**: 性能优化影响用户体验时

---

## 2. 如何更新 PRD

### 2.1 新增功能

**步骤**:

1. 在"功能清单"的"待实现功能"中添加新功能
   ```markdown
   | FE-XXX | 功能名称 | P1 | 3天 | - |
   ```

2. 在"功能详细说明"中添加功能描述
   ```markdown
   ### 6.X 功能名称（FE-XXX）
   
   **功能描述**: ...
   **交互行为**: ...
   **技术要求**: ...
   **API**: ...
   ```

3. 在"技术架构映射"中添加映射关系
   ```markdown
   | 功能名称 | 前端位置 | 后端位置 | API 端点 |
   ```

4. 在"迭代计划"中规划开发时间

### 2.2 功能状态更新

**功能完成时**:

1. 将功能从"待实现功能"移动到"已实现功能"
2. 更新状态为 ✅
3. 填写完成时间
4. 在"更新日志"中记录

**示例**:
```markdown
### 2.1 已实现功能 ✅

| 功能ID | 功能名称 | 状态 | 实现位置 | 完成时间 |
|--------|---------|------|---------|---------|
| FE-011 | 收藏列表完整显示 | ✅ 已完成 | `pages/Favorites.tsx` | 2026-02-05 |
```

### 2.3 更新日志格式

```markdown
### v2.X (YYYY-MM-DD)

**迭代主题**

- ✅ 功能1（FE-XXX）
- ✅ 功能2（BE-XXX）
- ⚠️ 功能3（FE-XXX）- 部分完成

**功能状态**

- ✅ 核心功能完整
- ⚠️ 待完善功能说明
```

---

## 3. 功能ID管理

### 3.1 ID 分配规则

- **后端功能**: BE-001, BE-002, ...
- **前端功能**: FE-001, FE-002, ...
- **API 功能**: API-001, API-002, ...

### 3.2 ID 分配表

| 类型 | 当前最大ID | 下一个可用ID |
|------|-----------|-------------|
| BE | BE-006 | BE-007 |
| FE | FE-010 | FE-011 |

**更新方式**: 每次分配新ID后更新此表

---

## 4. 迭代计划更新

### 4.1 每个迭代开始前

1. 确认当前迭代目标
2. 将相关功能添加到迭代计划
3. 分配开发任务

### 4.2 迭代进行中

1. 更新功能状态（进行中 → 已完成）
2. 记录遇到的问题和解决方案
3. 调整计划（如需要）

### 4.3 迭代结束后

1. 更新"更新日志"
2. 总结完成的功能
3. 规划下一迭代

---

## 5. 技术架构映射更新

### 5.1 新增功能时

在"技术架构映射"中添加：

```markdown
| 功能名称 | 前端位置 | 后端位置 | API 端点 |
|---------|---------|---------|---------|
| 新功能 | `pages/NewPage.tsx` | `features/newfeature` | `GET /api/v1/xxx` |
```

### 5.2 架构重构时

如果架构发生变更，需要：
1. 更新"技术架构映射"表
2. 更新"功能详细说明"中的实现位置
3. 在"更新日志"中说明架构变更

---

## 6. 快速更新模板

### 6.1 功能完成更新模板

```markdown
## 在"已实现功能"中添加

| FE-XXX | 功能名称 | ✅ 已完成 | `pages/xxx.tsx` | YYYY-MM-DD |

## 在"更新日志"中添加

### v2.X (YYYY-MM-DD)

- ✅ 功能名称（FE-XXX）
```

### 6.2 新增功能模板

```markdown
## 在"待实现功能"中添加

| FE-XXX | 功能名称 | P1 | 3天 | 依赖功能 |

## 在"功能详细说明"中添加

### 6.X 功能名称（FE-XXX）

**功能描述**: ...
**交互行为**: ...
**技术要求**: ...
**API**: ...
```

---

## 7. PRD 评审

### 7.1 评审时机

- 每个迭代开始前
- 重大功能规划时
- 架构变更时

### 7.2 评审内容

- 功能清单是否完整
- 优先级是否合理
- 迭代计划是否可行
- 技术方案是否清晰

---

## 8. 版本控制

### 8.1 Git 提交规范

```bash
# 新增功能
git commit -m "docs(prd): 添加功能 FE-XXX - 功能名称"

# 更新功能状态
git commit -m "docs(prd): 更新功能 FE-XXX 状态为已完成"

# 更新迭代计划
git commit -m "docs(prd): 更新 v2.X 迭代计划"
```

### 8.2 版本号规则

- **主版本号**: 重大架构变更或产品方向调整
- **次版本号**: 新功能迭代
- **修订号**: 文档修正和更新

当前版本: **v2.0**

---

## 9. 常见问题

### Q: 功能开发中但还没完成，如何标记？

A: 在"待实现功能"中保持原样，在"更新日志"中标记为"进行中"：

```markdown
- 🔄 功能名称（FE-XXX）- 进行中
```

### Q: 功能被取消了怎么办？

A: 在"待实现功能"中删除，在"更新日志"中说明：

```markdown
- ❌ 功能名称（FE-XXX）- 已取消（原因：...）
```

### Q: 如何记录功能的技术细节？

A: 在"功能详细说明"中详细描述，或链接到技术文档。

### Q: PRD 和架构文档的关系？

A: 
- **PRD**: 描述"做什么"（What）
- **架构文档**: 描述"怎么做"（How）
- 两者需要保持同步更新

---

## 10. 检查清单

每次更新 PRD 后，检查：

- [ ] 功能ID是否正确分配
- [ ] 功能状态是否准确
- [ ] 更新日志是否记录
- [ ] 技术架构映射是否更新
- [ ] 迭代计划是否调整
- [ ] Git 提交信息是否规范

---

**维护者**: 产品团队 + 技术团队  
**更新频率**: 每个迭代至少更新一次  
**评审频率**: 每个迭代开始前评审
